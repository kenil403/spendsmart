{% extends 'layout.html' %}
{% block title %}Categories{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-7">
    <h4>Your Categories</h4>
    <table class="table table-sm align-middle">
      <thead>
        <tr><th>Name</th><th class="text-end">Budget</th><th class="text-center">Expenses</th><th class="text-end">Actions</th></tr>
      </thead>
      <tbody>
        {% for c in categories %}
        <tr>
          <td>{{ c.name }}</td>
          <td class="text-end">{{ (c.budget or 0)|inr }}</td>
          <td class="text-center">{{ c.expenses|length }}</td>
          <td class="text-end text-nowrap">
            <a class="btn btn-sm btn-outline-secondary btn-icon" href="/categories/{{ c.id }}/edit" title="Edit"><i class="bi bi-pencil"></i> Edit</a>
            <form method="post" action="/categories/{{ c.id }}/delete" style="display:inline-block" onsubmit="return confirm('Delete category & its {{ c.expenses|length }} expense(s)?');">
              <button class="btn btn-sm btn-outline-danger btn-icon" title="Delete"><i class="bi bi-trash"></i> Delete</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="4">No categories yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="col-md-5">
    <h4>Add Category</h4>
    <form method="post" action="/categories">
      <div class="mb-3">
        <label class="form-label">Name</label>
        <input class="form-control" name="name" placeholder="Food, Rent, Transport" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Monthly Budget</label>
        <input class="form-control" name="budget" type="number" step="0.01" value="0">
      </div>
      <button class="btn btn-primary" type="submit">Add</button>
    </form>
  </div>
</div>
{% endblock %}
